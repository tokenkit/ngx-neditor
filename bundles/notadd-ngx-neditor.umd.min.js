!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("@notadd/ngx-neditor",["exports","@angular/core","rxjs","rxjs/operators","@angular/forms","@angular/common"],t):t((e.notadd=e.notadd||{},e.notadd["ngx-neditor"]={}),e.ng.core,e.rxjs,e.rxjs.operators,e.ng.forms,e.ng.common)}(this,function(e,r,s,o,t,n){"use strict";function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return s}var i=[{name:"config",src:"./assets/node_modules/@notadd/neditor/neditor.config.js",loaded:!1},{name:"neditor",src:"./assets/node_modules/@notadd/neditor/neditor.all.min.js",loaded:!1},{name:"jquery",src:"./assets/node_modules/@notadd/neditor/third-party/jquery-1.10.2.min.js",loaded:!1},{name:"service",src:"./assets/node_modules/@notadd/neditor/neditor.service.js",loaded:!1}],d=function(){function e(){this.loaded=!1,this.emitter=new s.Subject,this.scripts=i}return e.prototype.getChangeEmitter=function(){return this.emitter.asObservable()},e.prototype.load=function(){var t=this;if(this.loaded)return this;this.loaded=!0;var n=[];return this.scripts.forEach(function(e){return n.push(t.loadScript(e))}),s.of.apply(void 0,function i(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}(n)).pipe(o.concatAll()).subscribe({complete:function(){t.emitter.next(!0)}}),this},e.prototype.loadScript=function(i){var o=this;return new s.Observable(function(t){var e=o.scripts.find(function(e){return e.name===i.name});if(e&&e.loaded)t.next(e),t.complete();else{var n=document.createElement("script");n.type="text/javascript",n.src=i.src,n.onload=function(){i.loaded=!0,t.next(i),t.complete()},n.onerror=function(e){t.error("Couldn't load script "+i.src)},document.getElementsByTagName("body")[0].appendChild(n)}})},e.decorators=[{type:r.Injectable}],e}(),c=function p(){this.options={UEDITOR_HOME_URL:"./assets/node_modules/@notadd/neditor/"}},u=!1,l=function(){function e(e,t,n,i,o){this.sl=e,this.el=t,this.neConfig=n,this.cd=i,this.zone=o,this.inited=!1,this.events={},this._disabled=!1,this.onTouched=function(){},this.onChange=function(){},this.ngUnsubscribe=new s.Subject,this.loading=!0,this.id="_neditor-"+Math.random().toString(36).substring(2),this.loadingTip="加载中...",this.delay=50,this.neOnPreReady=new r.EventEmitter,this.neOnReady=new r.EventEmitter,this.neOnDestroy=new r.EventEmitter}return Object.defineProperty(e.prototype,"disabled",{set:function(e){this._disabled=e,this.setDisabled()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.inited=!0},e.prototype.ngAfterViewInit=function(){var t=this;window.UE?this.initDelay():this.sl.load().getChangeEmitter().pipe(o.takeUntil(this.ngUnsubscribe)).subscribe(function(e){t.initDelay()})},e.prototype.ngOnChanges=function(e){this.inited&&e.config&&(this.destroy(),this.initDelay())},e.prototype.initDelay=function(){var e=this;setTimeout(function(){return e.init()},this.delay)},e.prototype.init=function(){var t=this;if(!window.UE)throw new Error("neditor js文件加载失败");if(!this.instance){this.neConfig.hook&&!u&&(u=!0,this.neConfig.hook(UE)),this.neOnPreReady.emit(this);var n=Object.assign({},this.neConfig.options,this.config);this.zone.runOutsideAngular(function(){var e=UE.getEditor(t.id,n);e.ready(function(){t.instance=e,t.value&&t.instance.setContent(t.value),t.neOnReady.emit(t)}),e.addListener("contentChange",function(){t.value=e.getContent(),t.zone.run(function(){return t.onChange(t.value)})})}),this.loading=!1,this.cd.detectChanges()}},e.prototype.destroy=function(){var a=this;this.instance&&this.zone.runOutsideAngular(function(){if(0<Object.keys(a.events).length)try{for(var e=function r(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(a.events),t=e.next();!t.done;t=e.next()){var n=t.value;a.instance.removeListener(n,a.events[n])}}catch(s){i={error:s}}finally{try{t&&!t.done&&(o=e["return"])&&o.call(e)}finally{if(i)throw i.error}}var i,o;a.instance.removeListener("ready"),a.instance.removeListener("contentChange"),a.instance.destroy(),a.instance=null}),this.neOnDestroy.emit()},e.prototype.setDisabled=function(){this.instance&&(this._disabled?this.instance.setDisabled():this.instance.setEnabled())},Object.defineProperty(e.prototype,"Instance",{get:function(){return this.instance},enumerable:!0,configurable:!0}),e.prototype.addListener=function(e,t){this.events[e]||(this.events[e]=t,this.instance.addListener(e,t))},e.prototype.removeListener=function(e){this.events[e]&&(this.instance.removeListener(e,this.events[e]),delete this.events[e])},e.prototype.ngOnDestroy=function(){this.destroy(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},e.prototype.writeValue=function(e){this.value=e,this.instance&&this.instance.setContent(this.value)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e,this.setDisabled()},e.decorators=[{type:r.Component,args:[{selector:"ngx-neditor",template:'\n  <textarea id="{{id}}" class="ueditor-textarea"></textarea>\n  <div *ngIf="loading" class="loading" [innerHTML]="loadingTip"></div>\n  ',preserveWhitespaces:!1,styles:[":host {line-height: initial;} :host .ueditor-textarea{display:none;}"],providers:[{provide:t.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return e}),multi:!0}],changeDetection:r.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:d},{type:r.ElementRef},{type:c},{type:r.ChangeDetectorRef},{type:r.NgZone}]},e.propDecorators={loadingTip:[{type:r.Input}],config:[{type:r.Input}],disabled:[{type:r.Input}],delay:[{type:r.Input}],neOnPreReady:[{type:r.Output}],neOnReady:[{type:r.Output}],neOnDestroy:[{type:r.Output}]},e}(),h=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[n.CommonModule],providers:[d,c],declarations:[l],exports:[l]}]}],e}();e.NgxNeditorComponent=l,e.NgxNeditorModule=h,e.ɵb=c,e.ɵa=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=notadd-ngx-neditor.umd.min.js.map